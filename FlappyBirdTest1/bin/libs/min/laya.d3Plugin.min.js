!function(t){t.un,t.uns,t.static;var e,i=t.class,n=t.getset,t=(t.__newvec,laya.d3.component.Component3D);laya.d3.core.ComponentNode,laya.d3.core.MeshTerrainSprite3D,laya.d3.core.Sprite3D,i(r,"laya.d3.component.PathFind",e=t),(i=r.prototype)._load=function(t){if(!(t instanceof laya.d3.core.MeshTerrainSprite3D))throw new Error("PathFinding: The owner must MeshTerrainSprite3D!");e.prototype._load.call(this,t),this._meshTerrainSprite3D=t},i.findPath=function(t,e,i,n){var r=this._meshTerrainSprite3D.minX,a=this._meshTerrainSprite3D.minZ,h=this._meshTerrainSprite3D.width/this.grid.width,s=this._meshTerrainSprite3D.depth/this.grid.height,o=h/2,d=s/2,l=Math.floor((t-r)/h),f=Math.floor((e-a)/s),c=Math.floor((i-r)/h),p=Math.floor((n-a)/s),u=this.grid.width-1,_=this.grid.height-1,g=this._finder.findPath(l=(l=u<l?u:l)<0?0:l,f=(f=_<f?_:f)<0?0:f,c=(c=u<c?u:c)<0?0:c,p=(p=_<p?_:p)<0?0:p,this.grid);this.grid.reset();for(var m=1;m<g.length-1;m++){var y=g[m];y[0]=y[0]*h+o+r,y[1]=y[1]*s+d+a}return 1==g.length?(g[0][0]=i,g[0][1]=i):1<g.length&&(g[0][0]=t,g[0][1]=e,g[g.length-1][0]=i,g[g.length-1][1]=n),g},n(0,i,"setting",function(){return this._setting},function(t){t&&(this._finder=new PathFinding.finders.AStarFinder(t)),this._setting=t});function r(){this._meshTerrainSprite3D=null,this._finder=null,this._setting=null,this.grid=null,r.__super.call(this)}}((window,document,Laya)),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";for(var i in Object.defineProperty(e,"__esModule",{value:!0}),Laya){var n=Laya[i];n&&n.__isclass&&(e[i]=n)}});